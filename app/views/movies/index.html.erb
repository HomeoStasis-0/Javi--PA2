<p style="color: green"><%= notice %></p>

<% content_for :title, "Movies" %>

<h1 style="text-align: center; color: #333; margin-top: 20px;">Movies</h1>

<table style="width: 80%; margin: 20px auto; border-collapse: collapse;">
  <thead>
    <tr>
      <th style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'title' %>background-color: lightblue;<% end %>">
        <%= link_to "Title ▲", movies_path(sort: 'title', direction: 'asc') %> |
        <%= link_to "▼", movies_path(sort: 'title', direction: 'desc') %>
        <% if params[:sort] == 'title' %>
          <% if params[:direction] == 'asc' %>
            ▲
          <% else %>
            ▼
          <% end %>
        <% end %>
      </th>
      <th style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'rating' %>background-color: lightgreen;<% end %>">
        <%= link_to "Rating ▲", movies_path(sort: 'rating', direction: 'asc') %> |
        <%= link_to "▼", movies_path(sort: 'rating', direction: 'desc') %>
        <% if params[:sort] == 'rating' %>
          <% if params[:direction] == 'asc' %>
            ▲
          <% else %>
            ▼
          <% end %>
        <% end %>
      </th>
      <th style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'release_date' %>background-color: lightcoral;<% end %>">
        <%= link_to "Release Date ▲", movies_path(sort: 'release_date', direction: 'asc') %> |
        <%= link_to "▼", movies_path(sort: 'release_date', direction: 'desc') %>
        <% if params[:sort] == 'release_date' %>
          <% if params[:direction] == 'asc' %>
            ▲
          <% else %>
            ▼
          <% end %>
        <% end %>
      </th>
      <th style="border: 1px solid black; padding: 8px;">Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @movies.each do |movie| %>
      <tr style="border: 1px solid black; padding: 8px;">
        <td style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'title' %>background-color: lightblue;<% end %>"><%= movie.title %></td>
        <td style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'rating' %>background-color: lightgreen;<% end %>"><%= movie.rating %></td>
        <td style="border: 1px solid black; padding: 8px; <% if params[:sort] == 'release_date' %>background-color: lightcoral;<% end %>"><%= movie.release_date %></td>
        <td style="border: 1px solid black; padding: 8px;">
          <%= link_to "Show this movie", movie_path(movie, sort: params[:sort], direction: params[:direction]) %>
        </td>
      </tr>
    <% end %>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="4" style="border: 1px solid black; padding: 8px; text-align: center; font-weight: bold;">Total Movies: <%= @movies.count %></td>
    </tr>
  </tfoot>
</table>

<div style="text-align: center; margin-top: 20px;">
  <div style="display: inline-block; padding: 20px; border: 1px solid #ccc; border-radius: 5px;">
    <%= link_to "New movie", new_movie_path(sort: params[:sort], direction: params[:direction]), style: "background-color: #4CAF50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;" %>
  </div>
</div>